App=angular.module("App",["ngResource"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainController"}).otherwise({redirectTo:"/"})}]),App.run(["$rootScope",function(a){function b(){a.isMobile=c.width()<=767,c.bind("resize",function(){a.isMobile=c.width()<=767,a.$apply()})}var c=$(window);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(a.isMobile=!0,a.$watch("isMobile",angular.noop)()):b()}]),App.controller("FooterController",["$scope",function(a){a.layout="views/layouts/footer.html"}]),App.controller("HeaderController",["$scope",function(a){a.layout="views/layouts/header.html"}]),App.controller("MainController",["$scope",function(a){function b(b){return a.steps[1].error=!1,b.hasOwnProperty("gender")&&b.gender||(a.steps[1].error=!0),b.hasOwnProperty("tobacco")&&b.tobacco||(a.steps[1].error=!0),!a.steps[1].error}function c(c){return a.steps[0].error=!1,b(c)||(a.steps[0].error=!0,a.steps[1].error=!1),c.hasOwnProperty("isPartner")&&null!=c.isPartner||(a.steps[0].error=!0),a.steps[1].visible=c.hasOwnProperty("isPartner")&&"1"==c.isPartner?!0:!1,!a.steps[0].error}function d(b){return a.steps[2].error=!1,b.hasOwnProperty("coverAmount")&&b.coverAmount>4e4&&b.coverAmount<75e4||(a.steps[2].error=!0),b.hasOwnProperty("coverTerm")&&b.coverTerm>5&&b.coverTerm<40||(a.steps[2].error=!0),b.hasOwnProperty("coverType")&&b.coverType||(a.steps[2].error=!0),b.hasOwnProperty("illnes")&&b.illnes?b.hasOwnProperty("illnes")&&"yes"==b.illnes&&(b.hasOwnProperty("illnesAmount")&&b.illnesAmount||(a.steps[2].error=!0)):a.steps[2].error=!0,!a.steps[2].error}function e(){return!0}a.steps=[{name:"About you",completed:!1,active:!0,visible:!0,data:null,validateFunction:c,error:!1},{name:"About your partner",completed:!1,active:!1,visible:!1,data:null,validateFunction:b,error:!1},{name:"Settings",completed:!1,active:!1,visible:!0,data:null,validateFunction:d,error:!1},{name:"Result",completed:!1,active:!1,visible:!0,data:null,validateFunction:e,error:!1}],a.submit=function(b){function c(){var b=_.findWhere(a.steps,{visible:!0,completed:!1});b&&(b.active=!0)}function d(b){var c=_.findWhere(a.steps,{visible:!0,active:!0});return c&&c.hasOwnProperty("validateFunction")&&c.validateFunction(b)?(c.data=b,c.completed=!0,c.active=!1,!0):!1}d(b)&&c()},a.goToStep=function(b){_.each(a.steps,function(a){a.active=!1}),b.active=!0,console.log("change step")}}]),App.controller("Step1Controller",["$scope",function(a){a.step={formality:null,firstName:null,lastName:null,birthday:null,gender:null,tobacco:null,isPartner:null},a.setFormality=function(b){a.step.formality=b},$(".dropdown-toggle").dropdown(),$(".datepicker").datepicker({format:"mm/dd/yyyy",startDate:"01/01/1940"})}]),App.controller("Step2Controller",["$scope",function(a){a.step={coverAmount:null,coverTerm:null,coverType:null,illnes:null,illnesAmount:null}}]);